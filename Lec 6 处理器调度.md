# Lec 6 处理器调度

### 处理器调度的层次

+ 目标

	- 响应时间
	
	- 吞吐量
	
	- 处理器利用率
	
+ 调度层次

	- 长程调度
	
		+ 决定哪个程序可以进入系统中被处理
		
		+ 控制多道程序设计的道数
		
	- 中程调度
	
		+ 交换功能的一部分
		
		+ 根据需要管理多道程序设计的道数
		
	- 短程调度
	
		+ 执行得很频繁,精确地决定下一次执行哪个进程
		
		+ 引起调度事件有:时钟中断,I/O中断,系统调用,信号
	
	- I/O调度

### 进程的挂起态

> 系统资源不能满足进程的需求,必须把某些进程挂起换到磁盘镜像区中

+ 阻塞态进程对换到磁盘将变为挂起态(Slides: pp17-18)
	
	- 阻塞挂起态

	- 就绪挂起态

+ 转换

	- 等待态 → 挂起等待态:不存在就绪进程或者操作系统根据资源和性能将等待态进程转化为挂起等待态
	
	- 挂起等待态 → 挂起就绪态:引起进程等待事件发生后
	
	- 就绪态 → 挂起就绪态:操作系统根据资源和性能可以对换出去成为挂起就绪态
	
	- 运行态 → 挂起就绪态:较高优先级的挂起等待态进程的等待事件结束后需要抢占CPU导致正常运行的进程转化为挂起就绪态
	
	- 新建态 → 挂起就绪态:操作系统根据资源和性能可以决定新建的进程被兑换出去成为挂起就绪态
	
	- 挂起就绪态 → 就绪态:内存中没有就绪态进程或者挂起就绪态进程比就绪态进程有更高优先级
	
	- 挂起等待态 → 等待态:进程退出后,主存内有了一大块自由空间,某个挂起等待态的进程有较高的优先级且系统指导他的阻塞事件即将结束

### 调度算法

+ 短程调度准则

	- 性能相关

		+ 面向用户:周转事件,响应时间,最后期限

		+ 面向系统:吞吐量,处理器利用率

	- 性能无关

		+ 面向用户:可预测性

		+ 面向系统:公平,优先级,平衡资源

+ 调度的模式

	- 非抢占式:一旦在运行态,就不断执行到终止,除非等待I/O或者某些系统服务阻塞自己

	- 抢占式:会被操作系统打断转移到就绪态

+ 调度算法

	- FCFS(先来先服务)
		
		+ 就绪就加入就绪队列
		
		+ 选择就绪队列中存在时间最长的运行
	
	- RR(Round Robin, 时间片轮转)
	
		+ 中断发生时当前运行的进程加入就绪队列
		
		+ 按照FCFS选择下一个运行的进程

	- SPN/SJF(Shortest Job First, 最短进程优先)

		+ 非抢占

		+ 选择所需处理时间最短的进程

		+ 短进程将会越过长进程,优先获得调度

	- SRT/SRTF(Shortest Remaining Time First, 最短剩余时间优先)

		+ 抢占式

		+ 调度器总是选择预期剩余时间更短的进程

		+ 新进程加入就绪队列,只要进程有更短的剩余运行时间就可以抢占正在运行的进程

	- HRRF(最高响应比优先)
		
		+ 选择响应比最高的(响应比=(等待时间+期待服务时间)/期待服务时间)
		
	- Feedback/MLFQ(Multi-Level Feedback Queue)(多级反馈调度)
	
		+ 建立多个不同优先级的就绪进程队列
	

###  批处理作业的调度

+ 批处理作业的管理

	- 作业说明语言和作业说明书

	- 作业状态(输入,后备,执行,完成)

+ 批处理作业的调度

	- 作业调度

	- 用户立场

	- 系统立场

+ 批处理作业调度算法
